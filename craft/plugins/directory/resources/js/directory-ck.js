function convertToObservable(e){var t=[];$.each(e,function(e,n){var r={};Object.keys(n).forEach(function(e){r[e]=ko.observable(n[e])});t.push(r)});return t}var $plugins;$(function(){$plugins=ko.observableArray();$popularPlugins=ko.observableArray();$("#directory-search").submit(function(){q=this.elements.q.value;if(q.length>0){data={q:q};$("#directory-search .spinner").removeClass("hidden");Craft.postActionRequest("directory/searchPlugins",data,$.proxy(function(e){if(typeof e.error!="undefined"){$("#directory-search .error").html(e.error);$("#directory-search .error").removeClass("hidden")}else{responsePlugins=e.plugins;responsePlugins=convertToObservable(responsePlugins);$plugins(responsePlugins)}$("#directory-search .spinner").addClass("hidden")},this))}return!1});$(".directory-popular .spinner").removeClass("hidden");Craft.postActionRequest("directory/getPopularPlugins",{},$.proxy(function(e){if(typeof e.error!="undefined"){$(".directory-popular .error").html(e.error);$(".directory-popular .error").removeClass("hidden")}else{responsePlugins=e.plugins;responsePlugins=convertToObservable(responsePlugins);$popularPlugins(responsePlugins)}$(".directory-popular .spinner").addClass("hidden")},this));var e={query:ko.observable(""),plugins:$plugins,popularPlugins:$popularPlugins};ko.applyBindings(e)});