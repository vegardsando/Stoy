!function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="javascripts/",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t){"use strict";var i=t;window.$&&$(function(){i.data=window._CpFieldLinksData||!1,i.init()}),i.settings={settingsClassSelector:"cpFieldLinks-settings",infoClassSelector:"cpFieldLinks-info",redirectKey:"_CpFieldLinksRedirectTo"},i.init=function(){i.path=Craft.path;var e=Craft.getLocalStorage(i.settings.redirectKey);if(e){var t=$('input[type="hidden"][name="action"]').filter('[value="fields/saveField"],[value="sections/saveEntryType"],[value="globals/saveSet"],[value="categories/saveGroup"]'),a=$('input[type="hidden"][name="redirect"]');t.length>0&&a.length>0&&a.attr("value",e)}Craft.setLocalStorage(i.settings.redirectKey,null),$(document).on("click","."+i.settings.settingsClassSelector+" a",i.onCpFieldLinksClick).ajaxComplete(i.onAjaxComplete),this.render()},i.render=function(){i.fieldIds=[],$(".cpFieldLinks").remove();var e,t,a=$("#main .field"),n=this.data.fields||{};a.each(function(){e=$(this),t=i.getFieldIdFromAttribute(e.attr("id")),t&&n.hasOwnProperty(t)&&(e.find(".heading:first label").after(i.templates.editFieldBtn(n[t])),i.fieldIds.push(e.attr("id")))});var s,r=$('input[type="hidden"]').filter('[name="entryTypeId"],[name="sectionId"],[name="setId"],[name="groupId"]'),d={},l=!1;if(r.each(function(){d[$(this).attr("name")]=$(this).attr("value")}),d.hasOwnProperty("sectionId")){l=i.data.baseEditEntryTypeUrl.replace("sectionId",d.sectionId),s=Craft.t("Entry Type");var o=$("#entryType").val()||!1;l+="/"+(o?o:i.data.entryTypeIds.hasOwnProperty(d.sectionId)?i.data.entryTypeIds[d.sectionId][0]:"")}else d.hasOwnProperty("setId")&&0===$('input[type="hidden"][name="action"][value="globals/saveSet"]').length?(l=i.data.baseEditGlobalSetUrl+"/"+d.setId,s=Craft.t("Global Set")):d.hasOwnProperty("groupId")&&$('input[type="hidden"][name="action"][value="categories/saveCategory"]').length>0&&(l=i.data.baseEditCategoryGroupUrl+"/"+d.groupId,s=Craft.t("Category Group"));if(l){var c=$(i.templates.editSourceBtn(l,s));switch(s){case Craft.t("Global Set"):c.appendTo($("#content"));break;case Craft.t("Entry Type"):case Craft.t("Category Group"):$("#settings").append(c);break;default:c.appendTo($("#main"))}}},i.getFieldIdFromAttribute=function(e){return e?(e=e.split("-"),3===e.length?e[1]:!1):!1},i.templates={editFieldBtn:function(e){return'<div class="cpFieldLinks cpFieldLinks-fieldEdit"><div class="'+i.settings.settingsClassSelector+'"><a href="'+i.data.baseEditFieldUrl+"/"+e.id+'" class="settings icon" role="button" aria-label="Edit field"></a></div><div class="'+i.settings.infoClassSelector+'"><p><code>'+e.handle+"</code></p></div></div>"},editSourceBtn:function(e,t){return'<div class="cpFieldLinks cpFieldLinks-sourceEdit"><div class="cpFieldLinks-wrapper"><div class="'+i.settings.settingsClassSelector+'"><a href="'+e+'" class="settings icon" role="button" aria-label="Edit '+(t||"element source")+'"></a></div><div class="'+i.settings.infoClassSelector+'"><p><span>Edit '+(t||"element source")+"</span></p></div></div></div>"}},i.onCpFieldLinksClick=function(e){Craft.setLocalStorage(i.settings.redirectKey,Craft.path)},i.onAjaxComplete=function(e,t,a){(a.url.indexOf("switchEntryType")>-1||Craft.path!==i.path)&&i.render()}}]);